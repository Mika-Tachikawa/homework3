<!-- Bookテーブルに保存された投稿データ全てを取得し、eachでBookレコード数分繰り返す -->
<!-- book変数にデータが格納され、book.[カラム名]と記述すると、レコードのカラムの内容を表示できる -->
<!-- book.titleと記述すると、投稿のタイトルが表示できる -->
<!-- テーブルで表示 -->
<% if @book.errors.any? %>
  <%= @book.errors.count %>errors prohibited this obj from being saved:
  <ul>
    <% @book.errors.full_messages.each do |message| %>
      <li><%= message %></li>
    <% end %>
  </ul>
<% end %>

  <div class="container">
  <div class="row">

    <div class="col-lg-3">
      <%= render'users/users', user:current_user%>
      <div class="card border-0"style="padding-top: 20px;"><%= render 'book', book: @book%></div>
    </div>
    
    <div class="col-lg-1">
    </div>

    <div class="col-lg-8">
      <h1>Books</h1>
      <table class="table table-hover">
        <tr>
          <th> </th>
          <th>Title</th>
          <th>Opinion</th>
        </tr>
        <% @books.each do |book| %>
        <tr>
          <td><%= image_tag book.user.get_profile_image(50,50) %></td>
           <td>
            <!-- book.titleに詳細ページへのリンクを追加 -->
            <!-- %= link_to〜end % -->
            <%= link_to book_path(book.id) do %>
            <span><%= book.title %></span>
            <% end %></td>
          <td><span><%= book.body %></span></td>
        </tr>
        <% end %>
      </table>
      
  </div>
  </div>


  <%= paginate @books %>